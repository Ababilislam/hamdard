{{extend 'layout_report.html'}}

<html>

<head>

</head>
<body>


<div class="blackCatTitle">&nbsp; Product Wise Customer Details</div>       
    <br>
    <table width="900" class="sample_border" >
        <tr style="background-color:#E6E6E6;">
            <td width="100" >Date Range</td>
            <td width="200" >Branch</td>
            <td width="150" >Physician</td>
            <td width="100" >Discount Type</td>
            <td width="50" >Status</td>
            <td width="150" >Item</td>
            
        </tr>
        <tr style="background-color:#F0FAFF">
            <td width="200" >							
            {{=from_dt}} <b> To</b> {{=to_dt}}</td>
            <td width="100" align="left" valign="top">
            {{=branch_id}}|{{=branch_name}} </td>
            <td width="150" >                           
            {{=physician_id}}|{{=physician_name}}</td>
            <td width="150" >                           
            {{=discount_type_id}}<b> </td>
            <td width="150" >                           
            {{=status_id}}</td>
            <td width="150" >                           
            {{=item_id}}|{{=item_name}}<b> </td>

        </tr>
    </table>

 <br/>
	<table width="900px" border="1" cellpadding="1" cellspacing="1" class="sample_border" >
		  <tr align="left" class="blackCatHead"  height="20px" style="background:#E9E9E9" >
		    <td width="40" >SL</td>
		    <td width="80" >inv. Date</td>
		    <td width="80" >inv. SL</td>
		    <td  width="200" >Branch </td>
		    <td  width="100" align="center">Physician </td>
		    <td  width="100" align="center">Customer</td>
		    <td  width="100" align="center">Item </td>
		    <td  width="100" align="center">Status </td>
		    <td  width="100" align="center">Discount Type</td>
		    <td  width="100" align="center">Discount %</td>
		    <td  width="100" align="center">Price</td>
		    <td  width="100" align="center">Price per/unit</td>
		    <td  width="100" align="center">Item Per/Unit</td>
		    <td  width="60" align="center">Qty</td>
            <td  width="60" align="center">Return</td>
            <td  width="60" align="center">Box</td>
            <td  width="60" align="center">Strip</td>
            <td  width="60" align="center">Gross Amount</td>
            <td  width="60" align="center">Dis. Amount</td>
            <td  width="60" align="center">Net. Amount</td>
	      </tr>

        {{
            for i in range(len(invoice_sql_execute)):
                recordData=invoice_sql_execute[i]
                order_sl=recordData['order_sl_counter']
                depot_id=recordData['depot_id']
                depot_name=recordData['depot_name']
                physician_id=recordData['physician_id']
                physician_name=recordData['physician_name']
                customer_id=recordData['customer_id']
                customer_name=recordData['customer_name']
                item_id=recordData['item_id']
                item_name=recordData['item_name']
                status=recordData['status']
                discount_type=recordData['discount_type']
                price=recordData['price']
                invoice_date=recordData['invoice_date']
                quantity=recordData['quantity']
                discount=recordData['item_discount_percent']if recordData['item_discount_percent'] is not None else 0
                quantity1=recordData['quantity']if status=='Invoiced' else 0
                price_per_unit=recordData['price_per_unit']
                item_per_unit=recordData['item_per_unit']
                return_count=recordData['quantity'] if status=='Return' else 0
                gross_amount=recordData['gross_amount']if recordData['gross_amount'] is not None else 0
                dis_amnt=recordData['dis_amnt']if recordData['dis_amnt'] is not None else 0
                
                
        }}
          

      <tr  align="left" class="blackCat"  style="vertical-align:middle; font-size:10px;">
        <td align="right" >{{=i+1}}</td>
        <td align="left" >{{=invoice_date}} </td>
        <td  align="right" >{{=order_sl}} </td>
        <td align="left" >{{=depot_name}}|{{=depot_id}}</td>
  
        <td  align="left" > {{=physician_name}}|{{=physician_id}} </td>
        <td  align="left"> {{=customer_name}}|{{=customer_id}}</td>
        <td  align="left">{{=item_name}}|{{=item_id}} </td>
        <td  align="left">{{=status}} </td>
        <td  align="left">{{=discount_type}} </td>
        <td  align="right"> {{=discount}}</td>
        <td  align="right">{{=price}}</td>
        <td  align="right">{{=price_per_unit}} </td>
        <td  align="right">{{=item_per_unit}} </td>
        <td  align="right">{{=quantity1}} </td>
        <td  align="right">{{=return_count}} </td>
        <td  align="right">{{=int(quantity/item_per_unit) if return_count == 0 else 0}}</td>
        <td  align="right">{{=(quantity%item_per_unit)if return_count == 0 else 0 }}</td>
        <td  align="right">{{=gross_amount if return_count == 0 else 0}} </td>
        <td  align="right">{{=dis_amnt if return_count == 0 else 0}} </td>
        <td  align="right">{{=( gross_amount-dis_amnt)if return_count == 0 else 0}} </td>
        
    
        </tr>
{{pass}}

	  </table>	
      <table>
        <tr>
            <td>
              {{if page_Number:}}
              <a href="{{=URL(args=[0])}}">First</a> | &nbsp;&nbsp;
              <a href="{{=URL(args=[page_Number-1 if page_Number>0 else 0])}}">Previous</a> |
              {{pass}}
              {{if len(invoice_sql_execute)>=item_per_page:}}
              &nbsp;&nbsp;
              <a href="{{=URL(args=[page_Number+1])}}">Next &nbsp;&nbsp;</a>
              {{pass}}
            </td>
          </tr>
      </table>
      
      <br><br>
      
<br/>


<br/>
<style>
    table.center {
        margin-left: auto; 
        margin-right: auto;
        text-align: center;
      }

      a{
        color: #08c;
        text-decoration: none;
    }
    a:link {
        -webkit-tap-highlight-color: #555;
    }
</style>


</body>
</html>

